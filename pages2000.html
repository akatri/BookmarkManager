 /n  /n/n /n/n/n/n/n/n/n<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> /n<html>/n<head>/n <title>/n  Java Practices -> Use final liberally/n </title>/n <link rel="stylesheet" type="text/css" href="../stylesheet9.css" media="all">/n /n <link rel="shortcut icon" href='/images/favicon.ico;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD' type="image/vnd.microsoft.icon">/n <meta name="description" content="Concise presentations of java programming practices, tasks, and conventions, amply illustrated with syntax highlighted code examples.">/n /n <meta name='keywords' content='inherit,inheritance,override,subclass,final,java,java programming,java practices,java idiom,java style,java design patterns,java coding conventions,'>/n /n /n</head>/n /n<body>/n/n/n<div class='menu-bar'>/n /n  <a href='/home/HomeAction.do;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD' title='Table of Contents'>Home</a> |/n  <a href='/vote/VoteSummaryAction.do;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD' title='View Poll Results'>Poll</a> |/n   /n  /n  <b><a href='/source/SourceAction.do;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD' title='Grab Source Code'>Source Code</a></b><IMG class='no-margin' SRC="../images/goldstar.gif" ALT=""> |/n/n  <a href='https://ca.linkedin.com/in/johnohanley' title='Hire me'> <b>Hire Me</b></a> | /n  <a href='http://www.web4j.com/Java_Web_Application_Framework_Overview.jsp?From=1' title='Free Download - Java Web Application Framework'><b>WEB4J</b></a> |/n  /n  <a href='http://www.formula4j.com/' title='Math expression parser'><b>Formula4J</b></a> |/n/n  <a href='http://www.amazon.com/exec/obidos/ASIN/0321356683/ref=nosim/javapractices-20'><b>Effective Java</b></a> |/n/n   <a href='/references/ReferencesAction.do;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD' title='References'>Links</a>/n   /n  <form action='/search/SearchAction.do;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD' method='get' class='search-form'>/n   <input type='text' name='SearchTerms' value="" size=12 maxlength=50 class='search'>/n   <input type='submit' value="Search">/n  </form>/n /n</div>/n/n<P>/n/n/n/n/n  /n/n /n/n/n/n/n/n/n<p class="display-messages">/n/n /n/n /n/n</p>/n/n/n<div class="main-layout">/n /n   /n/n /n/n/n/n/n<div class='page-title'>Use final liberally</div>/n/n<div class='main-body'>/n /n<br>Use the <tt>final</tt> keyword liberally to communicate your intent./n<p>The <tt>final</tt> keyword has more than one meaning:/n<ul>/n<li>/na <tt>final</tt> class cannot be extended</li>/n/n<li>/na <tt>final</tt> method cannot be overridden</li>/n/n<li>/n<tt>final</tt> fields, parameters, and local variables cannot change their/nvalue once set</li>/n</ul>/nIn the last case, "value" for primitives is understood in the usual sense,/nwhile "value" for objects means the object's <em>identity</em>, not its <em>state</em>. Once/nthe identity of a <tt>final</tt> object reference is set, it can still/nchange its state, but not its identity (that is, you can't re-point the object reference to /nsome other object)./n/n<p>Declaring primitive fields as <tt>final</tt> automatically ensures thread-safety/nfor that field./n<p>Some habitually declare parameters as <tt>final</tt>, since this is almost/nalways the desired behaviour. Others find this verbose, and of little real benefit./n/n<p>Consistently using <tt>final</tt> with local variables (when appropriate)/ncan be useful as well. It brings attention to the non-<tt>final</tt> local/nvariables, which usually have more logic associated with them (for example,/n<tt>result</tt>/nvariables, accumulators, loop variables). Many find this verbose./nA reasonable approach is to occasionally  use <tt>final</tt> for local variables,/nbut only if there is some unusual condition, whereby making <tt>final</tt> explicit can call /nattention to at least one non-<tt>final</tt> local variable in the method; this serves/nto quickly distinguish the non-<tt>final</tt> local variables from the others./n/n<p>Using <tt>final</tt>:/n<ul>/n<li>clearly communicates your intent</li>/n<li>allows the compiler and virtual machine to perform minor optimizations</li>/n<li>clearly flags items which are simpler in behaviour - <tt>final</tt> says, /n"<i>If you are looking for complexity, you won't find it here.</i>"</li>/n/n</ul>/n/n<b>Example</b>/n<br>/n<PRE>/n/n<span class='keyword'>import</span> java.util.*;/n<span class='keyword'>import</span> java.lang.reflect.Field;/n/n<span class='comment'>/** This class cannot be extended, since it's final. */</span>/n<span class='keyword'>public</span> <span class='keyword'>final</span> <span class='keyword'>class</span> Boat {/n/n  <span class='keyword'>public</span> Boat(<span class='keyword'>final</span> String aName, <span class='keyword'>final</span> <span class='keyword'>int</span> aLength, <span class='keyword'>final</span> Date aDateManufactured){/n    fName = aName;/n    fLength = aLength;/n    <span class='comment'>//make a defensive copy of the date/n</span>    fDateManufactured = <span class='keyword'>new</span> Date(aDateManufactured.getTime());/n/n    <span class='comment'>//does not compile, since the items are final:/n</span>    <span class='comment'>//aDateManufactured = null;/n</span>    <span class='comment'>//aLength = 0;/n</span>  }/n/n  <span class='comment'>/** Cannot be overridden, since the class itself is final. */</span>/n  <span class='keyword'>public</span> <span class='keyword'>void</span> setDate(<span class='keyword'>final</span> Date aNewDate){/n    <span class='comment'>//even though the field is final, its state can change:/n</span>    fDateManufactured.setTime(aNewDate.getTime());/n/n    <span class='comment'>//does not compile, since field is final:/n</span>    <span class='comment'>//fDateManufactured = aNewDate;/n</span>  }/n/n  <span class='comment'>/** Return the highest race score. */</span>/n  <span class='keyword'>public</span> Integer bestRaceScore(){/n    <span class='comment'>//the result reference can't be final, since it can be /n</span>    <span class='comment'>//re-pointed to different objects/n</span>    Integer result = Integer.valueOf(<span class='literal'>0</span>); /n    <span class='comment'>//final Integer result = Integer.valueOf(0); //doesn't compile/n</span>    /n    <span class='comment'>//this example is artificial, since fRaceScores could be /n</span>    <span class='comment'>//referenced directly here.../n</span>    <span class='keyword'>final</span> List&lt;Integer&gt; scores = fRaceScores;/n    <span class='keyword'>for</span>(Integer score : scores){/n      <span class='keyword'>if</span> (score &gt; result){/n        result = score; <span class='comment'>//re-point to the max value/n</span>      }/n    }/n    <span class='keyword'>return</span> result;/n  }/n  /n  <span class='comment'>//..elided/n</span>/n  <span class='comment'>// PRIVATE/n</span>  <span class='keyword'>private</span> <span class='keyword'>final</span> String fName;/n  <span class='keyword'>private</span> <span class='keyword'>final</span> <span class='keyword'>int</span> fLength;/n  <span class='keyword'>private</span> List&lt;Integer&gt; fRaceScores = <span class='keyword'>new</span> ArrayList&lt;&gt;();/n  <span class='keyword'>private</span> <span class='keyword'>final</span> Date fDateManufactured;/n}  /n</PRE>/n<br>/n<br>/n<br>/n/n</div>/n/n/n/n/n<div class='topic-section'>See Also :</div>/n<div class='main-body'>/n /n  /n  <a href='/topic/TopicAction.do;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD?Id=29'>Immutable objects</a> <br>/n /n  /n  <a href='/topic/TopicAction.do;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD?Id=69'>Designing for subclassing</a> <br>/n /n  /n  <a href='/topic/TopicAction.do;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD?Id=89'>Overridable methods need special care</a> <br>/n /n  /n  <a href='/topic/TopicAction.do;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD?Id=90'>Remember styles of inheritance</a> <br>/n /n</div>/n/n/n<div class='topic-section'>Would you use this technique?</div>/n<div class='main-body'>/n  /n  <form action="/vote/AddVoteAction.do;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD" method='post'>/n    Yes<input type='radio' name='Choice' value='Y' >/n    &nbsp;&nbsp;No<input type='radio' name='Choice' value='N'>/n    &nbsp;&nbsp;Undecided<input type='radio' name='Choice' value="?" >/n    &nbsp;&nbsp;<input type=submit value="Vote" >/n    <input type='hidden' name='Operation' value='Apply'>/n    <input type='hidden' name='TopicId' value='23'>/n  </form>/n</div>/n/n<div style='height:10.0em;'></div>/n/n /n /n</div>/n/n  /n/n /n/n/n/n/n/n<div align='center' class='legalese'>  /n&copy; 2018 Hirondelle Systems |/n<a href='/source/SourceAction.do;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD'><b>Source Code</b></a><IMG class='no-margin' SRC="/images/goldstar.gif" ALT=""> |/n<a href="mailto:webmaster@javapractices.com">Contact</a> |/n<a href="http://creativecommons.org/licenses/by-nc-sa/1.0/">License</a> |/n<a href='/apps/cjp.rss;jsessionid=3DBC0791B37D94F0CBEE77A45124C2BD'>RSS</a>/n<!-- ukey="2AC36CD2" -->/n<!-- ckey="16DF3D87" -->/n<br>/n/n Individual code snippets can be used under this <a href='../LICENSE.txt'>BSD license</a> - Last updated on September 21, 2013.<br>/n Over 2,000,000 unique IPs last year - <span title='Java Practices 2.6.5, Mon May 16 00:00:00 EDT 2011'>Built with</span> <a href='http://www.web4j.com'>WEB4J</a>.<br>/n - In Memoriam : Bill Dirani -/n</div>/n/n<script>/n  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){/n  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),/n  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)/n  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');/n/n  ga('create', 'UA-2633428-1', 'auto');/n  ga('send', 'pageview');/n/n</script>/n/n/n</body>/n</html>/n